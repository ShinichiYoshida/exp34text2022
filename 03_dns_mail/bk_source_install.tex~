\section{ソースコードからの一般的なソフトウェアインストール手順}

ここでは，BIND をはじめ，UNIX 系 OS で用いられる多くのオープンソースのフ
リーソフトウェアのソースコードからのインストール手順を示す．

まずは，ソースコードをダウンロードする．この実験では，ftp サーバ 192.168.0.1 （メインサーバ）に必要なものはおい
てあるので，ここからダウンロードする．

ソースコード類は，/pub/sources 以下にある．

\begin{cli}
% cd ダウンロードするディレクトリ
% ftp 192.168.0.1
 ログイン名：anonymous
 パスワード：なんでも良い
      （以前はメールアドレスを入れるのがネチケットだったが
        昨今はむしろプライバシーの問題
        などから入れない方が安全）
% cd /pub
% ls
% cd sources
% ls
% get 必要なファイル （例えば，bind-9.9.1.tar.gz など）
% quit
\end{cli}

以上でダウンロードは終了である．

ソースコードは，C/C++ 言語のソースコード *.c ファイルや，ヘッダ *.h ファ
イル，それらをコンパイルする手順が書かれている Makefile，その他のスクリ
プトなどからなり，数十〜数百のファイルが TAR 形式\footnote{Tape Archive 
と呼ばれる UNIX 系で一般的なアーカイブ（複数のファイルを一つのファイルに
まとめる）形式}でアーカイブされており，さらに GNU zip (gzip) または，圧
縮率が高い bzip2形式，xz 形式で圧縮されている\footnote{gzip が UNIX 系で
は最も一般的で，bzip2 はその改良型，xz は比較的新しい圧縮率が高い（CPUや
メモリをより消費する）方式で，Windows などでは ZIP(.zip)，LHA (.lzh) も
よく用いられる．gzip, bzip2 はほとんどの Linux, FreeBSD などで標準で同梱
されているが，伝統的な商用 UNIX では compress 形式 (.Z) しか用いることが
できないものも多かった．}．

ファイル形式は，\\
**.tar.gz\\
または，\\
**.tgz\\
などとなっているので，

\begin{cli}
% tar tvzf *.tar.gz
\end{cli}
などとして内容を確認し，問題がなければ適当なディレクトリで，
\begin{cli}
% tar xvzf *.tar.gz
\end{cli}
として展開する．

詳しくは，付録B章の B.21 tar を参照すること．

tar で展開し作成されたフォルダに入り，
\begin{cli}
% cd folder
\end{cli}
README.txt あるいは INSTALL.txt などという名前のファイルがあるので，
このファイルを見てその手順に従う，
\begin{cli}
% less README.txt
% less INSTALL.txt
 (q で less を終了できる)
\end{cli}
よくある一般的な手順では，configure というシェルスクリプト（実行ファイル）
があり，これを用いて Makefile を作成し，そして make を実行することで，
コンパイルされ，make install することでファイルが配置され，ソフトウェア
のインストールが行える．

つまり，まとめると，
\begin{cli}
% cd ソースをコンパイルする場所
% tar cvzf ダウンロードしたファイル名
% cd 作成されたフォルダ
% ./configure  (オプションが必要であれば付ける)

（オプション一覧は，./configure --help で
  見ることができる）

% make

コンパイルされて問題がなかったら，インストール
インストールはスーパーユーザ権限が必要なので，

% su
# make install

ただし，make install する前にそれまであった同名の
ファイルがあれば，上書きされてしまうので，問題がないか確認すること．
\end{cli}
